{"version":3,"sources":["login.jsx","register.jsx","App.jsx","index.js"],"names":["Login","useState","user","setUser","loginStatus","setLoginStatus","loginMessage","setLoginMessage","login","useRef","passw","useEffect","axios","get","then","response","data","loggedIn","username","style","fontWeight","htmlFor","type","ref","onClick","post","current","value","password","console","log","auth","localStorage","setItem","token","message","getItem","headers","catch","err","Register","usernameReg","setUsernameReg","passwordReg","setPasswordReg","onChange","e","target","res","defaults","withCredentials","App","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mOAKO,SAASA,IAAS,IAAD,EACAC,mBAAS,MADT,mBACjBC,EADiB,KACXC,EADW,OAEcF,oBAAS,GAFvB,mBAEjBG,EAFiB,KAEJC,EAFI,OAGgBJ,mBAAS,IAHzB,mBAGjBK,EAHiB,KAGHC,EAHG,KAKlBC,EAAQC,mBACRC,EAAQD,mBAEZE,qBAAU,WACRC,IAAMC,IAAI,+BAA+BC,MAAK,SAACC,GAC1CA,EAASC,KAAKC,UACfZ,EAAeU,EAASC,KAAKd,KAAKgB,eAErC,IAyCH,OACE,gCACGd,GAAe,8CAAgB,sBAAMe,MAAO,CAACC,WAAW,QAAzB,SAAmClB,EAAKgB,cACxE,uBAAOG,QAAQ,GAAf,sBACA,uBAAOC,KAAK,OAAOC,IAAKf,IACxB,uBACA,uBAAOa,QAAQ,GAAf,sBACA,uBAAOC,KAAK,WAAWC,IAAKb,IAC5B,uBACA,wBAAQc,QAhDI,WACdZ,IACGa,KAAK,8BAA+B,CACnCP,SAAUV,EAAMkB,QAAQC,MACxBC,SAAUlB,EAAMgB,QAAQC,QAEzBb,MAAK,SAACC,GACLc,QAAQC,IAAIf,EAASC,MAClBD,EAASC,KAAKd,MACfC,EAAQY,EAASC,KAAKd,MACtBG,EAAeU,EAASC,KAAKe,MAC7BxB,EAAgB,IAChByB,aAAaC,QAAQ,iBAAkBlB,EAASC,KAAKkB,SAErD7B,EAAeU,EAASC,KAAKe,MAC7BxB,EAAgBQ,EAASC,KAAKmB,cAiClC,mBACC/B,GAAe,wBAAQoB,QA7BF,WACxB,IAAMU,EAAQF,aAAaI,QAAQ,kBACnCP,QAAQC,IAAI,6BAA8BI,GAC1CtB,IAAMC,IAAI,mCAAoC,CAC5CwB,QAAS,CACP,iBAAkBH,KAEnBpB,MAAK,SAAAC,GACNc,QAAQC,IAAIf,OAqBI,oCACfT,EACD,wBACA,wBAAQkB,QAjBa,WACvBZ,IAAMC,IAAI,0CAA0CC,MAAK,SAAAC,GAAQ,OAAIc,QAAQC,IAAIf,EAASC,KAAKmB,YAAUG,OAAM,SAAAC,GAAG,OAAIV,QAAQC,IAAIS,EAAIvB,KAAKmB,aAgBzI,+BACA,wBAAQX,QArBY,WACtBZ,IAAMC,IAAI,yCAAyCC,MAAK,SAAAC,GAAQ,OAAIc,QAAQC,IAAIf,EAASC,KAAKmB,YAAUG,OAAM,SAAAC,GAAG,OAAIV,QAAQC,IAAIS,EAAIvB,KAAKmB,aAoBxI,iCCrEC,SAASK,IAAW,IAAD,EACcvC,mBAAS,IADvB,mBACjBwC,EADiB,KACJC,EADI,OAEczC,mBAAS,IAFvB,mBAEjB0C,EAFiB,KAEJC,EAFI,KAWxB,OACE,gCACE,uBAAOvB,QAAQ,GAAf,sBACA,uBAAOC,KAAK,OAAOuB,SAAU,SAACC,GAAD,OAAKJ,EAAeI,EAAEC,OAAOpB,UAAS,uBACnE,uBAAON,QAAQ,GAAf,sBACA,uBAAOC,KAAK,WAAWuB,SAAU,SAACC,GAAD,OAAKF,EAAeE,EAAEC,OAAOpB,UAAU,uBACxE,wBAAQH,QAbG,WACTZ,IAAMa,KAAK,iCAAkC,CAC3CP,SAAUuB,EACVb,SAAUe,IACT7B,MAAK,SAAAkC,GAAG,OAAInB,QAAQC,IAAIkB,OAS7B,yBDlBNpC,IAAMqC,SAASC,iBAAkB,ECDjCtC,IAAMqC,SAASC,iBAAgB,ECYhBC,MATf,WACE,OACE,sBAAKC,UAAU,MAAf,UACE,cAACpD,EAAD,IACA,cAACwC,EAAD,QCJNa,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.6b2c2764.chunk.js","sourcesContent":["import axios from \"axios\"\r\nimport { useRef, useState, useEffect } from \"react\"\r\n\r\naxios.defaults.withCredentials = true\r\n\r\nexport function Login() {\r\n  let [user, setUser] = useState(null)\r\n  let [loginStatus, setLoginStatus] = useState(false)\r\n  let [loginMessage, setLoginMessage] = useState('')\r\n\r\n  let login = useRef()\r\n  let passw = useRef()\r\n\r\n  useEffect(() => {\r\n    axios.get(\"http://localhost:3001/login\").then((response) => {\r\n      if(response.data.loggedIn)\r\n        setLoginStatus(response.data.user.username)\r\n    })\r\n  }, [])\r\n\r\n  const onLogin = () => {\r\n    axios\r\n      .post(\"http://localhost:3001/login\", {\r\n        username: login.current.value,\r\n        password: passw.current.value,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data)\r\n        if(response.data.user) {\r\n          setUser(response.data.user)\r\n          setLoginStatus(response.data.auth)\r\n          setLoginMessage('')\r\n          localStorage.setItem(\"x-access-token\", response.data.token) //? Read about Bearer token\r\n        } else {\r\n          setLoginStatus(response.data.auth)\r\n          setLoginMessage(response.data.message)\r\n        }\r\n      })\r\n  }\r\n\r\n  const userAuthenticated = () => {\r\n    const token = localStorage.getItem(\"x-access-token\")\r\n    console.log('token from local storage: ', token)\r\n    axios.get(\"http://localhost:3001/isUserAuth\", {\r\n      headers: {\r\n        \"x-access-token\": token\r\n      }\r\n    }).then(response => {\r\n      console.log(response)\r\n    })\r\n  }\r\n\r\n  const closeConnection = () => {\r\n    axios.get(\"http://localhost:3001/closeConnection\").then(response => console.log(response.data.message)).catch(err => console.log(err.data.message))\r\n  }\r\n  const createConnection = () => {\r\n    axios.get(\"http://localhost:3001/createConnection\").then(response => console.log(response.data.message)).catch(err => console.log(err.data.message))\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {loginStatus && <div>Logged in: <span style={{fontWeight:'bold'}}>{user.username}</span></div>}\r\n      <label htmlFor=\"\">Username</label>\r\n      <input type=\"text\" ref={login} />\r\n      <br />\r\n      <label htmlFor=\"\">Password</label>\r\n      <input type=\"password\" ref={passw} />\r\n      <br />\r\n      <button onClick={onLogin}>Login</button>\r\n      {loginStatus && <button onClick={userAuthenticated}>Check if authenticated</button> }\r\n      {loginMessage}\r\n      <div>{}</div>\r\n      <button onClick={createConnection}>Create connection</button>\r\n      <button onClick={closeConnection}>Close connection</button>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport axios from 'axios'\r\naxios.defaults.withCredentials=true\r\n\r\nexport function Register(){\r\n  const [usernameReg, setUsernameReg] = useState('')\r\n  const [passwordReg, setPasswordReg] = useState('')\r\n\r\n  const submit = () => {\r\n        axios.post(\"http://localhost:3001/register\", {\r\n          username: usernameReg,\r\n          password: passwordReg\r\n        }).then(res => console.log(res))\r\n  }\r\n\r\n  return(\r\n    <div>\r\n      <label htmlFor=\"\">Username</label>\r\n      <input type=\"text\" onChange={(e)=>setUsernameReg(e.target.value)}/><br/>\r\n      <label htmlFor=\"\">Password</label>\r\n      <input type=\"password\" onChange={(e)=>setPasswordReg(e.target.value)} /><br/>\r\n      <button onClick={submit}>Register</button>\r\n    </div>\r\n  )\r\n}","\nimport './App.css';\nimport { Login } from './login';\nimport { Register } from './register';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Login />\n      <Register />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}